
<!DOCTYPE html>
<html lang="english">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="index, follow" />

  <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" type="text/css" href="http://olipratt.co.uk/theme/stylesheet/style.min.css">

  <link rel="stylesheet" type="text/css" href="http://olipratt.co.uk/theme/pygments/monokai.min.css">
  <link rel="stylesheet" type="text/css" href="http://olipratt.co.uk/theme/font-awesome/css/font-awesome.min.css">

    <link href="http://olipratt.co.uk/static/custom.css" rel="stylesheet">

    <link href="http://olipratt.co.uk/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Oli Pratt Atom">


    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">


    <!-- Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#282828">
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#282828">
    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Microsoft EDGE -->
    <meta name="msapplication-TileColor" content="#282828">

<meta name="author" content="Oli Pratt" />
<meta name="description" content="TL;DR GNU Make decides whether to rebuild a ‘target’ file based on the modification times of ‘dependency’ files of the target. In some cases those dependencies’ modification times can change without the contents of the files changing, thus forcing an unnecessary rebuild. If make was to decide whether to rebuild by looking at the hash of the contents of the dependency files instead, it would only rebuild when the contents changed. I wrote a …" />
<meta name="keywords" content="GNU Make, builds">

<meta property="og:site_name" content="Oli Pratt"/>
<meta property="og:title" content="Rebuilding Makefile Targets Only When Dependency Content Changes"/>
<meta property="og:description" content="TL;DR GNU Make decides whether to rebuild a ‘target’ file based on the modification times of ‘dependency’ files of the target. In some cases those dependencies’ modification times can change without the contents of the files changing, thus forcing an unnecessary rebuild. If make was to decide whether to rebuild by looking at the hash of the contents of the dependency files instead, it would only rebuild when the contents changed. I wrote a …"/>
<meta property="og:locale" content="en_GB"/>
<meta property="og:url" content="http://olipratt.co.uk/drafts/rebuilding-makefile-targets-only-when-dependency-content-changes.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2018-02-25 10:27:00+00:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="http://olipratt.co.uk/author/oli-pratt.html">
<meta property="article:section" content="GNU Make"/>
<meta property="article:tag" content="GNU Make"/>
<meta property="article:tag" content="builds"/>
<meta property="og:image" content="/static/images/site_logo.png">

  <title>Oli Pratt &ndash; Rebuilding Makefile Targets Only When Dependency Content Changes</title>

</head>
<body>
  <aside>
    <div>
      <a href="http://olipratt.co.uk">
        <img src="/static/images/site_logo.png" alt="Oli Pratt" title="Oli Pratt">
      </a>
      <h1><a href="http://olipratt.co.uk">Oli Pratt</a></h1>

<p>Software Engineer</p>
      <nav>
        <ul class="list">
          <li><a href="http://olipratt.co.uk/pages/about.html#about">About</a></li>

          <li><a href="https://www.metaswitch.com/" target="_blank">Metaswitch</a></li>
        </ul>
      </nav>

      <ul class="social">
        <li><a class="sc-github" href="https://github.com/olipratt" target="_blank"><i class="fa fa-github"></i></a></li>
        <li><a class="sc-linkedin" href="https://www.linkedin.com/in/olipratt/" target="_blank"><i class="fa fa-linkedin"></i></a></li>
        <li><a class="sc-rss" href="/feeds/all.atom.xml" target="_blank"><i class="fa fa-rss"></i></a></li>
      </ul>
    </div>


  </aside>
  <main>

    <nav>
      <a href="http://olipratt.co.uk">    Home
</a>

      <a href="/archives.html">Archives</a>
      <a href="/categories.html">Categories</a>
      <a href="/tags.html">Tags</a>

      <a href="http://olipratt.co.uk/feeds/all.atom.xml">    Atom
</a>

    </nav>

<article class="single">
  <header>
      
    <h1 id="rebuilding-makefile-targets-only-when-dependency-content-changes">Rebuilding Makefile Targets Only When Dependency Content Changes</h1>
    <p>
          Posted on Sun 25 February 2018 in <a href="http://olipratt.co.uk/category/gnu-make.html">GNU Make</a>


        &#8226; 1 min read
    </p>
  </header>


  <div>
    <h4 id="tldr">TL;DR</h4>
<ul>
<li>
<p>GNU Make decides whether to rebuild a &lsquo;target&rsquo; file based on the modification times of &lsquo;dependency&rsquo; files of the target.</p>
</li>
<li>
<p>In some cases those dependencies&rsquo; modification times can change <em>without</em> the contents of the files changing, thus forcing an unnecessary rebuild.</p>
</li>
<li>
<p>If <code>make</code> was to decide whether to rebuild by looking at the hash of the contents of the dependency files instead, it would only rebuild when the contents changed.</p>
</li>
<li>
<p>I wrote a utility for doing this as a simple makefile to include, and it is on Github here: <a href="https://github.com/olipratt/hashdeps">hashdeps</a></p>
</li>
</ul>
<h2 id="background">Background</h2>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="http://olipratt.co.uk/tag/gnu-make.html">GNU Make</a>
      <a href="http://olipratt.co.uk/tag/builds.html">builds</a>
    </p>
  </div>


  <div class="neighbors">
  </div>

    <div class="addthis_relatedposts_inline">


<!-- Disqus -->
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'olipratt';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
        Please enable JavaScript to view comments.

</noscript>
<!-- End Disqus -->
</article>

    <footer>
<p>&copy; Oli Pratt </p>
<p>    Powered by <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a>
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Oli Pratt ",
  "url" : "http://olipratt.co.uk",
  "image": "/static/images/site_logo.png",
  "description": "Oli Pratt's Thoughts and Writings"
}
</script>

</body>
</html>